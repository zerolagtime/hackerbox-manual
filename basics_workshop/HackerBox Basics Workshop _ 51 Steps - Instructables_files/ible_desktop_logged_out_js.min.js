Ibles.package("Ibles.mixins"),Ibles.mixins.SelectOneCollection={getSelected:function(){return this.findWhere({selected:!0})},select:function(e){this.forEach((function(e){e.set({selected:!1},{silent:!0})})),e.set({selected:!0})},deselect:function(e){e.set({selected:!1})}},Ibles.mixins.SelectManyCollection={getSelected:function(){return this.where({selected:!0})},select:function(e){e.set({selected:!0})},deselect:function(e){e.set({selected:!1})},deselectAll:function(){this.invoke("set",{selected:!1})},selectOnly:function(e,t){this.deselectAll(),this.forEach((function(n){_.contains(t,n.get(e))&&n.set({selected:!0})}))}},Ibles.mixins.SelectableModel={mergedAttributes:{selected:!1},select:function(e){return this.collection.select(this,e),this},deselect:function(e){return this.collection.deselect(this,e),this},toggleSelected:function(e){return this.get("selected")?this.deselect(e):this.select(e),this}},Ibles.package("Ibles.models"),Ibles.models.ChannelModel=Backbone.Model.extend({idAttribute:"name",defaults:{name:null,title:null,type:null,category:null,following:!1},toggleFollowing:function(){var e=this,t=_.extend(this.getFollowedParams(),{following:!this.get("following")});return Ibles.API.post({url:Ibles.apiUrl("setFollowing"),data:$.param(t,!0),processData:!1,success:function(t){e.set({following:t.following})}})},getFollowedParams:function(){var e={};return Ibles.setFollowChannelParams(e,this.get("category"),this.get("name")),e},isFollowing:function(){var e=this,t=this.getFollowedParams();return Ibles.API.getRequest("isFollowing",t,{success:function(t){e.set({following:t.isFollowing})}})}}),Ibles.package("Ibles.collections"),Ibles.collections.ChannelCollection=Backbone.Collection.extend({initialize:function(){this.makeMultiSelectable()},makeMultiSelectable:function(){Ibles.applyMixin(this,Ibles.mixins.SelectManyCollection)},model:function(e,t){return Ibles.makeModelSelectable(new Ibles.models.ChannelModel(e,t))},modelId:function(e){return e.name},getChannel:function(e){return this.get(e)}}),Ibles.package("Ibles.models"),Ibles.models.CategoryModel=Backbone.Model.extend({idAttribute:"name",defaults:function(){return{name:null,title:null,type:null,channels:[]}},initialize:function(e){var t=e||{};this.channelsCollection=new Ibles.collections.ChannelCollection(t.channels||[],{parse:!0})},getDisplayTitle:function(){return this.get("title")}}),Ibles.package("Ibles.models"),Ibles.models.TeacherCategoryModel=Ibles.models.CategoryModel.fullExtend({defaults:function(){return{name:null,title:null,type:null,channels:[],grades:[],gradeGroups:[],subjects:[]}},initialize:function(e,t){var n=e||{},i=n.grades||[],o=n.gradeGroups||[],s=n.subjects||[],a=i.concat(s);this._super(_.extend(n,{channels:a}),t),this.gradesCollection=new Ibles.collections.GradeCollection(i,{parse:!0}),this.gradeGroupsCollection=new Ibles.collections.GradeGroupCollection(o,{parse:!0}),this.subjectsCollection=new Ibles.collections.SubjectCollection(s,{parse:!0})},reset:function(e){var t=e||{};this.gradesCollection.reset(t.grades||[]),this.gradeGroupsCollection.reset(t.gradeGroups||[]),this.subjectsCollection.reset(t.subjects||[]),this.channelsCollection.reset((t.grades||[]).concat(t.subjects||[])),this.set({name:t.name,title:t.title,type:t.type})}}),Ibles.package("Ibles.collections"),Ibles.collections.CategoryCollection=Backbone.Collection.extend({initialize:function(){Ibles.applyMixin(this,Ibles.mixins.SelectOneCollection)},model:function(e,t){var n;return n="teachers"===e.name?new Ibles.models.TeacherCategoryModel(e,t):new Ibles.models.CategoryModel(e,t),Ibles.applyMixin(n,Ibles.mixins.SelectableModel),n},modelId:function(e){return e.name},getCategoryModel:function(e){return this.get(e)},getChannelsInCategory:function(e){var t=this.getCategoryModel(e);return t&&t.channelsCollection}}),Ibles.package("Ibles.models"),Ibles.models.SubjectModel=Ibles.models.ChannelModel.fullExtend({defaults:function(){return{type:"subject",category:"teachers"}}}),Ibles.package("Ibles.collections"),Ibles.collections.SubjectCollection=Ibles.collections.ChannelCollection.extend({model:function(e,t){return Ibles.makeModelSelectable(new Ibles.models.SubjectModel(e,t))},getSelectedSubjectNames:function(){var e=this.getSelected();return _.map(e,(function(e){return e.get("name")}))},getSelectedSubjectTitles:function(){var e=this.getSelected();return _.map(e,(function(e){return e.get("title")}))}}),Ibles.package("Ibles.models"),Ibles.models.GradeModel=Ibles.models.ChannelModel.fullExtend({defaults:function(){return{type:"grade",category:"teachers",gradeGroup:null}}}),Ibles.package("Ibles.collections"),Ibles.collections.GradeCollection=Ibles.collections.ChannelCollection.extend({model:function(e,t){return Ibles.makeModelSelectable(new Ibles.models.GradeModel(e,t))},getSelectedGradeGroupNames:function(){var e=this.getSelected(),t=_.map(e,(function(e){return e.get("gradeGroup")}));return _.uniq(t)}}),Ibles.package("Ibles.models"),Ibles.models.GradeGroupModel=Ibles.models.ChannelModel.fullExtend({defaults:function(){return{name:"",title:"",type:"gradeGroup",category:"teachers",grades:[]}},getFollowedParams:function(){return{grade:this.get("grades")}}}),Ibles.package("Ibles.collections"),Ibles.collections.GradeGroupCollection=Ibles.collections.ChannelCollection.extend({model:function(e,t){return Ibles.makeModelSelectable(new Ibles.models.GradeGroupModel(e,t))},initialize:function(e){if(this._super(e),!e){var t=Ibles.pageContext.gradeGroups;_.isEmpty(t)||this.reset(Ibles.pageContext.gradeGroups);var n=Ibles.pageContext.taxonomy,i=n&&_.findWhere(n,{name:"teachers"});_.isEmpty(i)||_.isEmpty(i.gradeGroups)||this.reset(i.gradeGroups)}},getGradeGroupContainingGrade:function(e){return this.find((function(t){return _.contains(t.get("grades"),e)}))},getSelectedNames:function(){return _.map(this.getSelected(),(function(e){return e.get("title")}))},getSelectedGrades:function(){var e=[];return _.each(this.getSelected(),(function(t){e=e.concat(t.get("grades"))})),e}}),Ibles.package("Ibles.models"),Ibles.models.Taxonomy=Backbone.Model.fullExtend({initialize:function(){this.categoryCollection=new Ibles.collections.CategoryCollection(Ibles.pageContext.taxonomy||[]),this.originalData=[]},clone:function(){var e=new Ibles.models.Taxonomy;return e.categoryCollection.reset(this.originalData,{parse:!0}),e},fetch:function(){var e=this;return this.fetchPromise().done((function(t){e.originalData=t,e.categoryCollection.reset(t,{parse:!0}),e.trigger("taxonomyLoaded")}))},fetchPromise:function(){return Ibles.taxonomyPromise||(Ibles.taxonomyPromise=Ibles.API.get({url:Ibles.reverseUrls.getTaxonomyUrl()})),Ibles.taxonomyPromise},getChannelsInCategory:function(e){return this.categoryCollection.getChannelsInCategory(e)},getChannelInCategory:function(e,t){var n=this.getChannelsInCategory(e);return n&&n.getChannel(t)},hasChannelInCategory:function(e,t){return!!this.getChannelInCategory(e,t)},getCategory:function(e){return this.categoryCollection.get(e)},getTeachersCategory:function(){return this.categoryCollection.get("teachers")},getSubjectsCollection:function(){return this.getTeachersCategory().subjectsCollection},getSubject:function(e){return this.getSubjectsCollection().get(e)},getGradesCollection:function(){return this.getTeachersCategory().gradesCollection},getGrade:function(e){return this.getGradesCollection().get(e)},getGradeGroupForGrade:function(e){return this.getTeachersCategory().gradeGroupsCollection.find((function(t){return _.contains(t.get("grades"),e)}))},toFlatBrowsableChannelsList:function(){var e=[];return this.categoryCollection.each((function(t){"teachers"===t.get("name")?(e.push.apply(e,t.get("gradeGroups")),e.push.apply(e,t.get("subjects").sort((function(e,t){return e.title.localeCompare(t.title)})))):e.push.apply(e,t.get("channels"))})),e}}),Ibles.package("Ibles.models"),Ibles.models.Classifier=Backbone.Model.extend({defaults:{classifiable:null,updatePrimary:!0},save:function(){var e=this,t=this.getParams(e.get("classifiable"));return this.trigger("status",{name:"loading"}),Ibles.API.jsonPostRequest("setClassifications",t).done((function(){e.trigger("status",{name:"success"})})).fail((function(){e.trigger("status",{name:"error"})}))},getParams:function(e){var t=this.get("updatePrimary"),n={id:e.get("id"),type:this.getTypeParam(e)};return Ibles.setClassificationsPostParam(e,n,t),n},getTypeParam:function(e){var t=e.get("type");return"Guide"==t?"collection":"Step by Step"==t?"project":"topic"}}),Ibles.package("Ibles.models","Ibles.collections"),Ibles.models.MemberModel=Backbone.Model.extend({defaults:function(){return{id:null,screenName:null,downloadUrl:null,following:!1,views:0,commentCount:0,discussionCount:0,featuredCount:0,favoritesCount:0,instructablesCount:0,draftsCount:0,publishedCollectionsCount:0,publishedProjectCount:0,draftCollectionsCount:0,collaborationsCount:0,followersCount:0,subscriptionsCount:0,occupations:[],images:[],socialHandles:[],website:{}}},initialize:function(e,t){t=t||{},this.userDataFetched=!1,this.profileImageCollection=new Ibles.collections.FileCollection(this.get("images")),t.fetchAuthorStats&&this.fetchAuthorStats(),t.fetchUserData&&this.fetchUserData()},getUrl:function(){return Ibles.reverseUrls.memberUrl(this.get("screenName"))},getAvatarFile:function(){return Ibles.fileFromDict(this.attributes)},getProfileImageUrls:function(){return this.profileImageCollection.map((function(e){return e.getMediumUrl()}))},fetch:function(){var e=this;return Ibles.API.getRequest("showAuthorModel",{screenName:this.get("screenName")}).done((function(t){e.set(t)}))},fetchAuthorStats:function(){var e=this;Ibles.API.getRequest("showAuthorStats",{screenName:this.get("screenName")}).done((function(t){e.set(t)})).always((function(){e.trigger("authorStatsSynced")}))},fetchUserData:function(){var e=this;Ibles.session.authenticated()&&(Ibles.session.isAdmin()||Ibles.session.get("screenName")===this.get("screenName"))&&Ibles.API.getRequest("showAuthorUserData",{screenName:this.get("screenName"),cb:Date.now()}).done((function(t){e.set(t),e.profileImageCollection.reset(t.images||[])})).error((function(e,t){401===t.status&&Ibles.API.post({url:Ibles.reverseUrls.logoutProxyUrl(),success:function(){Ibles.session.clear(),Ibles.locationAssign(window.location.href)}})})).always((function(){e.trigger("userDataSynced"),e.userDataFetched=!0}))},toggleFollowing:function(){var e=this;return Ibles.API.postRequest("setFollowing",{memberId:this.get("id"),following:!this.get("following")},{success:function(t){e.set({following:t.following})}})},isFollowing:function(){var e=this;return Ibles.API.getRequest("isFollowing",{screenName:this.get("screenName"),cb:Date.now()},{success:function(t){e.set({following:t.isFollowing||!1})}})},purgeFromCache:function(){return Ibles.API.jsonPostRequest("purgeCaches",{ids:[this.get("id")]})},sendPrivateMessage:function(e,t,n){var i={posted:(new Date).getTime(),body:Ibles.paragraphize(t.replace(/<\/?[^>]+(>|$)/g,"")),subject:e.replace(/<\/?[^>]+(>|$)/g,""),recipientId:this.get("id")},o=this;return _.isEmpty(n)||(i.inReplyToId=n),Ibles.API.jsonPostRequest("privateMessage",i,{success:function(){o.trigger("privateMessageSent")},error:function(){o.trigger("privateMessageError")}})},updateProfile:function(e){var t=this;return Ibles.API.jsonPost(Ibles.URLS.updateProfileUrl(),e).done((function(){Ibles.session.resetForCurrentUser((function(){t.trigger("updateProfileSuccess")}))})).fail((function(){t.trigger("updateProfileError")}))},changePassword:function(e){return Ibles.API.jsonPost(Ibles.URLS.changePasswordUrl(),e)},updateSettings:function(e){var t=e||{};return Ibles.API.post({url:Ibles.URLS.updateSettingsUrl(),data:t})}}),Ibles.collections.MemberCollection=Backbone.Collection.extend({model:Ibles.models.MemberModel}),Ibles.package("Ibles.models"),Ibles.models.BaseInstructableModel=Backbone.Model.extend({defaults:function(){return{id:null,title:null,urlString:null,fullUrl:null,author:null,type:null,status:null,classifications:[],suppliesFiles:[],category:null,channel:null,publishDate:null,favorite:!1,flagged:!1,fetchUserData:!1,fetchStats:!1,resourceType:null,collaborators:[],indexTags:[],submissions:[],totalProjects:0,coverImage:null}},initialize:function(e){this.author=new Ibles.models.MemberModel(this.get("author")),this.set({favorite:e&&e.favorite,isExceedingCollectionLimit:this.get("totalProjects")>Ibles.pageContext.collectionLimit}),this.get("fetchUserData")&&this.fetchUserData(),this.get("fetchStats")&&this.fetchStats()},fetch:function(){var e=this;return Ibles.API.getRequest("showInstructableModel",{id:this.get("id")}).done((function(t){e.set(e.parse(t)),t.author&&e.author.set(t.author)}))},parse:function(e){return Ibles.setPrimaryClassificationDetails(e),Ibles.deepExtend(Ibles.pageContext.ibleData,e),e},fetchUserData:function(){if(Ibles.session.authenticated()){var e=this;Ibles.API.getRequest("showInstructableUserData",{id:this.get("id"),rand:Math.round((new Date).getTime()/1e3)}).done((function(t){e.set(e.parse(t)),e.author.set({following:t.following})})).always((function(){e.trigger("userDataSynced")}))}},fetchStats:function(){var e=this;return Ibles.API.getRequest("getIbleStats",{id:this.get("id")},{success:function(t){e.set(t)}})},flagAction:function(){var e=this;return Ibles.API.ajaxRequest("flag/",{entryID:this.get("id"),action:"SET",flag:this.get("flaggedAs")},{success:function(){e.set({flagged:!0})}})},favoriteAction:function(){var e=this;return Ibles.API.ajaxRequest("favorite/",{entryId:this.get("id")},{success:function(){e.set({favorite:!e.get("favorite")})}})},isFavorite:function(){var e=this;return Ibles.API.getRequest("isFavorite",{id:this.get("id")},{success:function(t){e.set({favorite:t.isFavorite})}})},isOwner:function(e){return this.author.get("id")===e},currentUserIsOwner:function(){var e=Ibles.session;return e.authenticated()&&this.isOwner(e.get("id"))},isCollaborator:function(){var e=this.get("collaborators");return!_.isEmpty(e)&&!_.isEmpty(_.findWhere(e,{id:Ibles.session.get("id")}))},isEditableByCurrentUser:function(){var e=Ibles.session,t=e.get("id");return e.isAdmin()||this.isOwner(t)||this.isCollaborator(t)||e.canEditMakeyMakeyResource()||e.canSetIndexTags()||e.canEditKeywords()||e.canEditClassifications()},getNonInternalIndexTags:function(){return _.without(this.get("indexTags")||[],"internal")},toJSON:function(){var e=Backbone.Model.prototype.toJSON.apply(this,arguments);return e.url=Ibles.reverseUrls.ibleUrl(e.id),e},getEditUrl:function(){return"Guide"===this.get("type")?Ibles.reverseUrls.collectionEditUrl(this.get("id")):Ibles.reverseUrls.ibleEditUrl(this.get("id"))},getFiles:function(){var e=$.Deferred();return this.getFilesPromise||("Step by Step"!==this.get("type")?e.resolve([]):Ibles.API.getRequest("getFiles",{instructableId:this.get("id")},{success:function(t){var n=t.files.map((function(e){return new Ibles.collections.FileCollection(e||[])}));e.resolve(n)}}),this.getFilesPromise=e.promise()),this.getFilesPromise},getPhotosetFiles:function(){var e=$.Deferred();return this.getFiles().done((function(t){var n=[];_.each(t,(function(e){if(e.length){var t=e.filter((function(e){return e.get("image")}));t.length&&n.push(new Ibles.collections.FileCollection(t))}})),e.resolve(n)})),e.promise()}}),Ibles.package("Ibles.models"),Ibles.models.InstructableModel=Ibles.models.BaseInstructableModel.fullExtend({defaults:function(){return{disableComments:!1,allSteps:!1,currentStepIndex:0}},initialize:function(e,t){this._super(e,t),this.set({fullUrl:Ibles.pageContext.remoteHost+this.getUrl()})},getUrl:function(){var e=Ibles.reverseUrls;return"UNPUBLISHED"===this.get("status")?e.previewUrl(this.get("id")):e.ibleUrl(this.get("urlString")||this.get("id"))},delete:function(e){Ibles.API.postRequest("unpublishInstructable",{id:this.get("id"),delete:!0},{success:e})}}),Ibles.package("Ibles.collections"),Ibles.collections.InstructableCollection=Backbone.Collection.extend({model:Ibles.models.InstructableModel}),Ibles.package("Ibles.services"),Ibles.services.ImageRotationService=Backbone.Model.extend({rotateFileId:function(e,t){return Ibles.API.put({url:Ibles.apiUrl("file"),data:JSON.stringify({id:e,customRotation:t}),contentType:"application/json"})},rotateFileUrl:function(e,t){var n=e.split("/").pop().replace(/\..*/,"");return this.rotateFileId(n,t)}}),$.browser={version:8,msie:window.navigator.userAgent.indexOf("MSIE ")>0},
/*! fancyBox v2.0.5 fancyapps.com | fancyapps.com/fancybox/#license */
function(e,t,n){var i=n(e),o=n(t),s=n.fancybox=function(){s.open.apply(this,arguments)},a=!1,l=void 0!==t.createTouch;n.extend(s,{version:"2.0.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,autoSize:!0,autoResize:!l,autoCenter:!l,fitToView:!0,aspectRatio:!1,topRatio:.5,fixed:!(n.browser.msie&&6>=n.browser.version||l),scrolling:"auto",wrapCSS:"fancybox-default",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},keys:{next:[13,32,34,39,40],prev:[8,33,37,38],close:[27]},tpl:{wrap:'<div class="fancybox-wrap"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe class="fancybox-iframe" name="fancybox-frame{rnd}" frameborder="0" hspace="0"'+(n.browser.msie?' allowtransparency="true"':"")+"></iframe>",swf:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="wmode" value="transparent" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{href}" /><embed src="{href}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="100%" height="100%" wmode="transparent"></embed></object>',error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<div title="Close" class="fancybox-item fancybox-close"></div>',next:'<a title="Next" class="fancybox-nav fancybox-next"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:300,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:300,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:{speedIn:0,speedOut:300,opacity:.8,css:{cursor:"pointer"},closeClick:!0},title:{type:"float"}}},group:{},opts:{},coming:null,current:null,isOpen:!1,isOpened:!1,wrap:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(e,t){s.close(!0),e&&!n.isArray(e)&&(e=e instanceof n?n(e).get():[e]),s.isActive=!0,s.opts=n.extend(!0,{},s.defaults,t),n.isPlainObject(t)&&void 0!==t.keys&&(s.opts.keys=!!t.keys&&n.extend({},s.defaults.keys,t.keys)),s.group=e,s._start(s.opts.index||0)},cancel:function(){s.coming&&!1===s.trigger("onCancel")||(s.coming=null,s.hideLoading(),s.ajaxLoad&&s.ajaxLoad.abort(),s.ajaxLoad=null,s.imgPreload&&(s.imgPreload.onload=s.imgPreload.onabort=s.imgPreload.onerror=null))},close:function(e){s.cancel(),s.current&&!1!==s.trigger("beforeClose")&&(s.unbindEvents(),!s.isOpen||e&&!0===e[0]?(n(".fancybox-wrap").stop().trigger("onReset").remove(),s._afterZoomOut()):(s.isOpen=s.isOpened=!1,n(".fancybox-item, .fancybox-nav").remove(),s.wrap.stop(!0).removeClass("fancybox-opened"),s.inner.css("overflow","hidden"),s.transitions[s.current.closeMethod]()))},play:function(e){var t=function(){clearTimeout(s.player.timer)},i=function(){t(),s.current&&s.player.isActive&&(s.player.timer=setTimeout(s.next,s.current.playSpeed))},o=function(){t(),n("body").unbind(".player"),s.player.isActive=!1,s.trigger("onPlayEnd")};s.player.isActive||e&&!1===e[0]?o():s.current&&(s.current.loop||s.current.index<s.group.length-1)&&(s.player.isActive=!0,n("body").bind({"afterShow.player onUpdate.player":i,"onCancel.player beforeClose.player":o,"beforeLoad.player":t}),i(),s.trigger("onPlayStart"))},next:function(){s.current&&s.jumpto(s.current.index+1)},prev:function(){s.current&&s.jumpto(s.current.index-1)},jumpto:function(e){s.current&&(e=parseInt(e,10),1<s.group.length&&s.current.loop&&(e>=s.group.length?e=0:0>e&&(e=s.group.length-1)),void 0!==s.group[e]&&(s.cancel(),s._start(e)))},reposition:function(e){s.isOpen&&s.wrap.css(s._getPosition(e))},update:function(e){s.isOpen&&(a||setTimeout((function(){var t=s.current;a&&(a=!1,t)&&((t.autoResize||e&&"orientationchange"===e.type)&&(t.autoSize&&(s.inner.height("auto"),t.height=s.inner.height()),s._setDimension(),t.canGrow&&s.inner.height("auto")),t.autoCenter&&s.reposition(),s.trigger("onUpdate"))}),100),a=!0)},toggle:function(){s.isOpen&&(s.current.fitToView=!s.current.fitToView,s.update())},hideLoading:function(){n("#fancybox-loading").remove()},showLoading:function(){s.hideLoading(),n('<div id="fancybox-loading"><div></div></div>').click(s.cancel).appendTo("body")},getViewport:function(){return{x:i.scrollLeft(),y:i.scrollTop(),w:i.width(),h:i.height()}},unbindEvents:function(){s.wrap&&s.wrap.unbind(".fb"),o.unbind(".fb"),i.unbind(".fb")},bindEvents:function(){var e=s.current,t=e.keys;e&&(i.bind("resize.fb, orientationchange.fb",s.update),t&&o.bind("keydown.fb",(function(e){var i;!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey&&0>n.inArray(e.target.tagName.toLowerCase(),["input","textarea","select","button"])&&(i=e.keyCode,-1<n.inArray(i,t.close)?(s.close(),e.preventDefault()):-1<n.inArray(i,t.next)?(s.next(),e.preventDefault()):-1<n.inArray(i,t.prev)&&(s.prev(),e.preventDefault()))})),n.fn.mousewheel&&e.mouseWheel&&1<s.group.length&&s.wrap.bind("mousewheel.fb",(function(e,t){var i=n(e.target).get(0);(0===i.clientHeight||i.scrollHeight===i.clientHeight&&i.scrollWidth===i.clientWidth)&&(e.preventDefault(),s[0<t?"prev":"next"]())})))},trigger:function(e){var t,i=s[-1<n.inArray(e,["onCancel","beforeLoad","afterLoad"])?"coming":"current"];if(i){if(n.isFunction(i[e])&&(t=i[e].apply(i,Array.prototype.slice.call(arguments,1))),!1===t)return!1;i.helpers&&n.each(i.helpers,(function(t,o){o&&void 0!==s.helpers[t]&&n.isFunction(s.helpers[t][e])&&s.helpers[t][e](o,i)})),n.event.trigger(e+".fb")}},isImage:function(e){return e&&e.match(/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i)},isSWF:function(e){return e&&e.match(/\.(swf)(.*)?$/i)},_start:function(e){var t,i,o,a={},l=s.group[e]||null;l&&(l.nodeType||l instanceof n)&&(t=!0,n.metadata&&(a=n(l).metadata())),a=n.extend(!0,{},s.opts,{index:e,element:l},n.isPlainObject(l)?l:a),n.each(["href","title","content","type"],(function(e,i){a[i]=s.opts[i]||t&&n(l).attr(i)||a[i]||null})),"number"==typeof a.margin&&(a.margin=[a.margin,a.margin,a.margin,a.margin]),a.modal&&n.extend(!0,a,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{css:{cursor:"auto"},closeClick:!1}}}),s.coming=a,!1===s.trigger("beforeLoad")?s.coming=null:(i=a.type,e=a.href||l,i||(t&&(!(o=n(l).data("fancybox-type"))&&l.className&&(i=(o=l.className.match(/fancybox\.(\w+)/))?o[1]:null)),!i&&"string"===n.type(e)&&(s.isImage(e)?i="image":s.isSWF(e)?i="swf":e.match(/^#/)&&(i="inline")),i||(i=t?"inline":"html"),a.type=i),"inline"===i||"html"===i?(a.content||(a.content="inline"===i?n("string"===n.type(e)?e.replace(/.*(?=#[^\s]+$)/,""):e):l),a.content&&a.content.length||(i=null)):e||(i=null),a.group=s.group,a.isDom=t,a.href=e,"image"===i?s._loadImage():"ajax"===i?s._loadAjax():i?s._afterLoad():s._error("type"))},_error:function(e){s.hideLoading(),n.extend(s.coming,{type:"html",autoSize:!0,minHeight:0,hasError:e,content:s.coming.tpl.error}),s._afterLoad()},_loadImage:function(){s.imgPreload=new Image,s.imgPreload.onload=function(){this.onload=this.onerror=null,s.coming.width=this.width,s.coming.height=this.height,s._afterLoad()},s.imgPreload.onerror=function(){this.onload=this.onerror=null,s._error("image")},s.imgPreload.src=s.coming.href,s.imgPreload.width||s.showLoading()},_loadAjax:function(){s.showLoading(),s.ajaxLoad=n.ajax(n.extend({},s.coming.ajax,{url:s.coming.href,error:function(e,t){"abort"!==t?s._error("ajax",e):s.hideLoading()},success:function(e,t){"success"===t&&(s.coming.content=e,s._afterLoad())}}))},_preloadImages:function(){var e,t=s.group,i=s.current,o=t.length;if(i.preload&&!(2>t.length))for(var a=1;a<=Math.min(i.preload,o-1);a++)e=t[(i.index+a)%o],(e=n(e).attr("href")||e)&&((new Image).src=e)},_afterLoad:function(){s.hideLoading(),s.coming&&!1!==s.trigger("afterLoad",s.current)?(s.isOpened?(n(".fancybox-item").remove(),s.wrap.stop(!0).removeClass("fancybox-opened"),s.inner.css("overflow","hidden"),s.transitions[s.current.prevMethod]()):(n(".fancybox-wrap").stop().trigger("onReset").remove(),s.trigger("afterClose")),s.unbindEvents(),s.isOpen=!1,s.current=s.coming,s.wrap=n(s.current.tpl.wrap).addClass("fancybox-"+(l?"mobile":"desktop")+" fancybox-tmp "+s.current.wrapCSS).appendTo("body"),s.outer=n(".fancybox-outer",s.wrap).css("padding",s.current.padding+"px"),s.inner=n(".fancybox-inner",s.wrap),s._setContent()):s.coming=!1},_setContent:function(){var e,t,i=s.current,o=i.type;switch(o){case"inline":case"ajax":case"html":(e=i.content)instanceof n&&((e=e.show().detach()).parent().hasClass("fancybox-inner")&&e.parents(".fancybox-wrap").trigger("onReset").remove(),n(s.wrap).bind("onReset",(function(){e.appendTo("body").hide()}))),i.autoSize&&(t=n('<div class="fancybox-tmp '+s.current.wrapCSS+'"></div>').appendTo("body").append(e),i.width=t.width(),i.height=t.height(),t.width(s.current.width),t.height()>i.height&&(t.width(i.width+1),i.width=t.width(),i.height=t.height()),e=t.contents().detach(),t.remove());break;case"image":e=i.tpl.image.replace("{href}",i.href),i.aspectRatio=!0;break;case"swf":e=i.tpl.swf.replace(/\{width\}/g,i.width).replace(/\{height\}/g,i.height).replace(/\{href\}/g,i.href)}if("iframe"===o){if(e=n(i.tpl.iframe.replace("{rnd}",(new Date).getTime())).attr("scrolling",i.scrolling),i.scrolling="auto",i.autoSize)return e.width(i.width),s.showLoading(),void e.data("ready",!1).appendTo(s.inner).bind({onCancel:function(){n(this).unbind(),s._afterZoomOut()},load:function(){var e,t=n(this);try{this.contentWindow.document.location&&(e=t.contents().find("body").height()+12,t.height(e))}catch(e){i.autoSize=!1}!1===t.data("ready")?(s.hideLoading(),e&&(s.current.height=e),s._beforeShow(),t.data("ready",!0)):e&&s.update()}}).attr("src",i.href);e.attr("src",i.href)}else"image"!==o&&"swf"!==o||(i.autoSize=!1,i.scrolling="visible");s.inner.append(e),s._beforeShow()},_beforeShow:function(){s.coming=null,s.trigger("beforeShow"),s._setDimension(),s.wrap.hide().removeClass("fancybox-tmp"),s.bindEvents(),s._preloadImages(),s.transitions[s.isOpened?s.current.nextMethod:s.current.openMethod]()},_setDimension:function(){var e,t=s.wrap,i=s.outer,o=s.inner,a=s.current,l=s.getViewport(),r=a.margin,c=2*a.padding,d=a.width,u=a.height,h=a.maxWidth,f=a.maxHeight,p=a.minWidth,g=a.minHeight;if(l.w-=r[1]+r[3],l.h-=r[0]+r[2],-1<d.toString().indexOf("%")&&(d=(l.w-c)*parseFloat(d)/100),-1<u.toString().indexOf("%")&&(u=(l.h-c)*parseFloat(u)/100),r=d/u,d+=c,u+=c,a.fitToView&&(h=Math.min(l.w,h),f=Math.min(l.h,f)),a.aspectRatio?(d>h&&(u=((d=h)-c)/r+c),u>f&&(d=((u=f)-c)*r+c),d<p&&(u=((d=p)-c)/r+c),u<g&&(d=((u=g)-c)*r+c)):(d=Math.max(p,Math.min(d,h)),u=Math.max(g,Math.min(u,f))),d=Math.round(d),u=Math.round(u),n(t.add(i).add(o)).width("auto").height("auto"),o.width(d-c).height(u-c),t.width(d),e=t.height(),d>h||e>f)for(;(d>h||e>f)&&d>p&&e>g;)u-=10,a.aspectRatio?(d=Math.round((u-c)*r+c))<p&&(u=((d=p)-c)/r+c):d-=10,o.width(d-c).height(u-c),t.width(d),e=t.height();a.dim={width:d,height:e},a.canGrow=a.autoSize&&u>g&&u<f,a.canShrink=!1,a.canExpand=!1,d-c<a.width||u-c<a.height?a.canExpand=!0:(d>l.w||e>l.h)&&d>p&&u>g&&(a.canShrink=!0),t=e-c,s.innerSpace=t-o.height(),s.outerSpace=t-i.height()},_getPosition:function(e){var t=s.current,n=s.getViewport(),i=t.margin,o=s.wrap.width()+i[1]+i[3],a=s.wrap.height()+i[0]+i[2],l={position:"absolute",top:i[0]+n.y,left:i[3]+n.x};return t.fixed&&(!e||!1===e[0])&&a<=n.h&&o<=n.w&&(l={position:"fixed",top:i[0],left:i[3]}),l.top=Math.ceil(Math.max(l.top,l.top+(n.h-a)*t.topRatio))+"px",l.left=Math.ceil(Math.max(l.left,l.left+.5*(n.w-o)))+"px",l},_afterZoomIn:function(){var e=s.current,t=e.scrolling;s.isOpen=s.isOpened=!0,s.wrap.addClass("fancybox-opened").css("overflow","visible"),s.update(),s.inner.css("overflow","yes"===t?"scroll":"no"===t?"hidden":t),(e.closeClick||e.nextClick)&&s.inner.css("cursor","pointer").bind("click.fb",e.nextClick?s.next:s.close),e.closeBtn&&n(e.tpl.closeBtn).appendTo(s.outer).bind("click.fb",s.close),e.arrows&&1<s.group.length&&((e.loop||0<e.index)&&n(e.tpl.prev).appendTo(s.inner).bind("click.fb",s.prev),(e.loop||e.index<s.group.length-1)&&n(e.tpl.next).appendTo(s.inner).bind("click.fb",s.next)),s.trigger("afterShow"),s.opts.autoPlay&&!s.player.isActive&&(s.opts.autoPlay=!1,s.play())},_afterZoomOut:function(){s.trigger("afterClose"),s.wrap.trigger("onReset").remove(),n.extend(s,{group:{},opts:{},current:null,isActive:!1,isOpened:!1,isOpen:!1,wrap:null,outer:null,inner:null})}}),s.transitions={getOrigPosition:function(){var e=s.current,t=e.element,i=e.padding,o=n(e.orig),a={},l=50,r=50;return!o.length&&e.isDom&&n(t).is(":visible")&&((o=n(t).find("img:first")).length||(o=n(t))),o.length?(a=o.offset(),o.is("img")&&(l=o.outerWidth(),r=o.outerHeight())):(e=s.getViewport(),a.top=e.y+.5*(e.h-r),a.left=e.x+.5*(e.w-l)),{top:Math.ceil(a.top-i)+"px",left:Math.ceil(a.left-i)+"px",width:Math.ceil(l+2*i)+"px",height:Math.ceil(r+2*i)+"px"}},step:function(e,t){var n,i,o;"width"!==t.prop&&"height"!==t.prop||(i=o=Math.ceil(e-2*s.current.padding),"height"===t.prop&&(n=(e-t.start)/(t.end-t.start),t.start>t.end&&(n=1-n),i-=s.innerSpace*n,o-=s.outerSpace*n),s.inner[t.prop](i),s.outer[t.prop](o))},zoomIn:function(){var e,t,i=s.wrap,o=s.current;e=o.dim,"elastic"===o.openEffect?(delete(t=n.extend({},e,s._getPosition(!0))).position,e=this.getOrigPosition(),o.openOpacity&&(e.opacity=0,t.opacity=1),s.outer.add(s.inner).width("auto").height("auto"),i.css(e).show(),i.animate(t,{duration:o.openSpeed,easing:o.openEasing,step:this.step,complete:s._afterZoomIn})):(i.css(n.extend({},e,s._getPosition())),"fade"===o.openEffect?i.fadeIn(o.openSpeed,s._afterZoomIn):(i.show(),s._afterZoomIn()))},zoomOut:function(){var e,t=s.wrap,n=s.current;"elastic"===n.closeEffect?("fixed"===t.css("position")&&t.css(s._getPosition(!0)),e=this.getOrigPosition(),n.closeOpacity&&(e.opacity=0),t.animate(e,{duration:n.closeSpeed,easing:n.closeEasing,step:this.step,complete:s._afterZoomOut})):t.fadeOut("fade"===n.closeEffect?n.closeSpeed:0,s._afterZoomOut)},changeIn:function(){var e,t=s.wrap,n=s.current;"elastic"===n.nextEffect?((e=s._getPosition(!0)).opacity=0,e.top=parseInt(e.top,10)-200+"px",t.css(e).show().animate({opacity:1,top:"+=200px"},{duration:n.nextSpeed,easing:n.nextEasing,complete:s._afterZoomIn})):(t.css(s._getPosition()),"fade"===n.nextEffect?t.hide().fadeIn(n.nextSpeed,s._afterZoomIn):(t.show(),s._afterZoomIn()))},changeOut:function(){var e=s.wrap,t=s.current,i=function(){n(this).trigger("onReset").remove()};e.removeClass("fancybox-opened"),"elastic"===t.prevEffect?e.animate({opacity:0,top:"+=200px"},{duration:t.prevSpeed,easing:t.prevEasing,complete:i}):e.fadeOut("fade"===t.prevEffect?t.prevSpeed:0,i)}},s.helpers.overlay={overlay:null,update:function(){var e;this.overlay.width(0).height(0),n.browser.msie?e=(e=Math.max(t.documentElement.scrollWidth,t.body.scrollWidth))<Math.max(t.documentElement.offsetWidth,t.body.offsetWidth)?i.width():e:e=o.width(),this.overlay.width(e).height(o.height())},beforeShow:function(e){this.overlay||(e=n.extend(!0,{speedIn:"fast",closeClick:!0,opacity:1,css:{background:"black"}},e),this.overlay=n('<div id="fancybox-overlay"></div>').css(e.css).appendTo("body"),this.update(),e.closeClick&&this.overlay.bind("click.fb",s.close),i.bind("resize.fb",n.proxy(this.update,this)),this.overlay.fadeTo(e.speedIn,e.opacity))},onUpdate:function(){this.update()},afterClose:function(e){this.overlay&&this.overlay.fadeOut(e.speedOut||0,(function(){n(this).remove()})),this.overlay=null}},s.helpers.title={beforeShow:function(e){var t;(t=s.current.title)&&(t=n('<div class="fancybox-title fancybox-title-'+e.type+'-wrap">'+t+"</div>").appendTo("body"),"float"===e.type&&(t.width(t.width()),t.wrapInner('<span class="child"></span>'),s.current.margin[2]+=Math.abs(parseInt(t.css("margin-bottom"),10))),t.appendTo("over"===e.type?s.inner:"outside"===e.type?s.wrap:s.outer))}},n.fn.fancybox=function(e){var t,i=n(this),a=this.selector||"",l=function(o){var l=this,r="rel",c=l[r],d=t;!o.ctrlKey&&!o.altKey&&!o.shiftKey&&!o.metaKey&&(o.preventDefault(),c||(r="data-fancybox-group",c=n(l).attr("data-fancybox-group")),c&&""!==c&&"nofollow"!==c&&(d=(l=(l=a.length?n(a):i).filter("["+r+'="'+c+'"]')).index(this)),e.index=d,s.open(l,e))};return t=(e=e||{}).index||0,a?o.undelegate(a,"click.fb-start").delegate(a,"click.fb-start",l):i.unbind("click.fb-start").bind("click.fb-start",l),this}}(window,document,jQuery),
/*!
* overides fancybox jquery plugin to provide horizontal transition
* and w/ a new overlay helper that's fixed positioned
* <div id="ible-fancybox-overlay"></div>
*/
function(e,t){var n=e(window);e.extend(t.defaults,{wrapCSS:"ible-fancybox",scrolling:"visible",aspectRatio:!0,loop:!1,prevSpeed:600,nextSpeed:600,keys:{next:[13,32,39],prev:[37],close:[27]},helpers:{overlay:null,PhotosetOverlay:{}}}),t.transitions.changeIn=function(){var e=t.wrap,n=t.current,i=t._getPosition(!0);t.isForward?(i.left=parseInt(i.left,10)+1500+"px",e.css(i).show().animate({left:"-=1500px"},{duration:n.nextSpeed,complete:t._afterZoomIn})):(i.left=parseInt(i.left,10)-1500+"px",e.css(i).show().animate({left:"+=1500px"},{duration:n.nextSpeed,complete:t._afterZoomIn}))},t.transitions.changeOut=function(){var n,i=t.wrap,o=t.current;i.removeClass("fancybox-opened"),n=t.isForward?"-=1500px":"+=1500px","elastic"===o.prevEffect&&i.animate({opacity:.4,left:n},{duration:o.prevSpeed,complete:function(){e(this).trigger("onReset").remove()}})},t.next=function(){t.current&&(t.isForward=!0,t.jumpto(t.current.index+1))},t.prev=function(){t.current&&(t.isForward=!1,t.jumpto(t.current.index-1))},t.closeOrig=t.close,t.close=function(n){if("object"==typeof n&&n.target){var i=e(n.target);(i.attr("id")===t.overlayId||i.hasClass("fancybox-close")&&e(this).attr("id")!==t.overlayId||i.hasClass("transparency"))&&t.closeOrig(n)}else t.closeOrig(n)},t._afterZoomOut=function(){t.trigger("afterClose")},t.getViewport=function(){return{x:n.scrollLeft(),y:0,w:n.width(),h:n.height()}},t.originalUrl=window.location.href,t.overlayId="ible-fancybox-overlay",t.overlayWrap='<div id="'+t.overlayId+'"><div class="transparency"></div></div>',t.helpers.PhotosetOverlay={overlay:null,beforeLoad:function(n){this.overlay||(n=e.extend(!0,{speedIn:"fast",closeClick:!0},n),this.overlay=e(t.overlayWrap).appendTo("body"),n.closeClick&&this.overlay.bind("click.fb",t.close),this.overlay.fadeTo(n.speedIn,n.opacity))},beforeShow:function(e){t.wrap.detach().appendTo("div#"+t.overlayId)},afterClose:function(n){t.wrap.trigger("onReset").remove(),this.overlay&&(this.overlay.remove(),this.overlay=null),e.extend(t,{group:{},opts:{},current:null,isActive:!1,isOpened:!1,isOpen:!1,wrap:null,outer:null,inner:null})}}}(jQuery,jQuery.fancybox),Ibles.views.FancyboxView=Backbone.View.extend({initialize:function(e){_.bindAll(this,"beforeShow","afterShow","afterClose"),this.menuBarView=null,this.opts=e,this.opts.targets.fancybox({beforeShow:this.beforeShow,afterShow:this.afterShow,afterClose:this.afterClose})},beforeShow:function(){this.cleanupMenuBar()},afterShow:function(){this.opts.afterShow&&this.opts.afterShow();var e=this.getCurrentImageUrl();Ibles.isGif(e)?this.swapGifWithVideo():Ibles.isCdnUrl(e)&&this.setupMenuBar()},afterClose:function(){this.cleanupMenuBar()},setupMenuBar:function(){var e=this.opts.canRotate;this.menuBarView=new Ibles.views.FancyboxMenuBar({el:$("#ible-fancybox-overlay"),showRotateOption:e&&e()})},cleanupMenuBar:function(){this.menuBarView&&(this.menuBarView.destroy(),this.menuBarView=null)},getCurrentImageUrl:function(){return $.fancybox.current.href},swapGifWithVideo:function(){var e=this.getCurrentImageUrl();Ibles.isGif(e)&&$("#ible-fancybox-overlay").find(".fancybox-image").replaceWith($("<video>",{class:"gif-video",autoplay:!0,muted:!0,playsinline:!0,controls:!0,src:Ibles.updateQueryParameter(e,"format","mp4")}).show())}}),Ibles.views.FancyboxMenuBar=Backbone.View.extend({events:{"click .image-rotate-angle":"rotate","click .image-rotate-save":"saveRotation"},initialize:function(e){this.angle=0,this.rotationCountSinceLastSave=0,this.$img=this.$(".fancybox-image"),this.$menuBar=null,this.showRotateOption=e.showRotateOption,this.originalHeight=this.$img.height(),this.originalWidth=this.$img.width(),this.appendMenuBar()},destroy:function(){this.$img=null,this.$menuBar=null,this.stopListening(),this.undelegateEvents()},appendMenuBar:function(){this.$menuBar=$('<div class="fancybox-menu-bar">'),$.fancybox.inner.append(this.$menuBar),this.appendDownloadLink(),this.showRotateOption&&(this.appendRotateAction(),this.appendSaveBtn())},appendDownloadLink:function(){this.$menuBar.append($("<a>",{class:"ible-download-link",title:"Download Original",target:"_blank",href:$($.fancybox.current.element).data("download").split("?")[0]}).append($("<img>",{src:Ibles.staticUrl("img/icon-download.png")}))).click((function(){Ibles.gaUserEvent("overlayImageDownload",{eventLabel:"photoset",eventValue:!0})}))},appendRotateAction:function(){this.$menuBar.append($("<a>",{class:"image-rotate-angle",title:"Rotate Image"}).append($("<img>",{src:Ibles.staticUrl("svg/rotate.svg")})))},appendSaveBtn:function(){this.$menuBar.append($("<a>",{class:"image-rotate-save btn btn-orange",title:"Save Image"}).data({"loading-text":"Loading...","failed-text":"Failed","complete-text":"Success!"}).text("Save"))},rotate:function(){var e=this.originalHeight,t=this.originalWidth,n=0,i=1;switch(this.angle){case 0:n=90,i=t>=e?e/t:t/e;break;case 90:n=180,i=1;break;case 180:n=270,i=t>=e?e/t:t/e;break;case 270:n=0,i=1}this.angle=n,this.rotationCountSinceLastSave++,this.transform(this.$img,i,n),this.$(".image-rotate-save").show()},transform:function(e,t,n){var i=`scale(${t}) rotate(${n}deg)`,o=e.get(0);o.style.WebkitTransform=i,o.style.msTransform=i,o.style.transform=i},saveRotation:function(e){var t,n=this,i=$.fancybox.current,o=i.href,s=$(i.element),a=s.data("fileid"),l=this.rotationCountSinceLastSave%4*90;t=(new Ibles.services.ImageRotationService).rotateFileId(a,l).done((function(e){var t=e.file,i=btoa(t.modifiedDate),a=o.split("?")[0]+`?md=${i}`;s.attr("href",a),s.find("img").attr("src",a),n.rotationCountSinceLastSave=0})),Ibles.syncButtonStatesToRequest($(e.currentTarget),t)}}),Ibles.JST.photoset='<[ if (numVideos) {]>\n<div class="videoset-wrapper">   \n    <div class="videoset"></div>\n</div>\n<[}]>\n<[ if (numImages) {]>\n<div class="photoset-wrapper">\n    <div class="photoset"></div>\n</div>\n<[}]> \n',Ibles.JST["videoset-cell"]='<div class="videoset-cell">\n    <div class="videoset-item">\n        << embedHtmlCode >>\n    </div>\n</div>\n',Ibles.JST["videoset-youtube-cell"]="<iframe\n    allowfullscreen\n    src=\"https://www.youtube.com/embed/<< videoID >>?feature=oembed\"\n    srcdoc=\"\n        <style>\n        *{padding:0;margin:0;overflow:hidden}\n        html,body{height:100%}\n        img,span{position:absolute;width:100%;top:0;bottom:0;margin:auto}\n        span:hover{color:red}\n        span{height:1.5em;text-align:center;font:48px/1.5 sans-serif;color:white;text-shadow:0 0 0.5em black;}\n        .title{position:absolute;z-index:1;font-size:larger;font-family:'myriad-pro', sans-serif; padding:1em;color:white;}\n        .watchOnYT{position:absolute;z-index:1;bottom:0;left:0;padding:1em;font-family:'myriad-pro', sans-serif;color:white;background:rgba(0,0,0,0.5)}\n        .watchOnYT a{color:white;text-decoration:none}\n        .watchOnYT svg{position:relative;top:3px;}\n        </style>\n        <div class='title'><< name >></div>\n        <div class='watchOnYT'>\n            <a target='_blank' href='https://www.youtube.com/watch?v=<< videoID >>'>\n            Watch on\n            <svg height='100%' version='1.1' viewBox='0 0 110 26' fill='white' width='75'><use class='ytp-svg-shadow' xlink:href='#ytp-id-30'></use><path class='ytp-svg-fill' d='M 16.68,.99 C 13.55,1.03 7.02,1.16 4.99,1.68 c -1.49,.4 -2.59,1.6 -2.99,3 -0.69,2.7 -0.68,8.31 -0.68,8.31 0,0 -0.01,5.61 .68,8.31 .39,1.5 1.59,2.6 2.99,3 2.69,.7 13.40,.68 13.40,.68 0,0 10.70,.01 13.40,-0.68 1.5,-0.4 2.59,-1.6 2.99,-3 .69,-2.7 .68,-8.31 .68,-8.31 0,0 .11,-5.61 -0.68,-8.31 -0.4,-1.5 -1.59,-2.6 -2.99,-3 C 29.11,.98 18.40,.99 18.40,.99 c 0,0 -0.67,-0.01 -1.71,0 z m 72.21,.90 0,21.28 2.78,0 .31,-1.37 .09,0 c .3,.5 .71,.88 1.21,1.18 .5,.3 1.08,.40 1.68,.40 1.1,0 1.99,-0.49 2.49,-1.59 .5,-1.1 .81,-2.70 .81,-4.90 l 0,-2.40 c 0,-1.6 -0.11,-2.90 -0.31,-3.90 -0.2,-0.89 -0.5,-1.59 -1,-2.09 -0.5,-0.4 -1.10,-0.59 -1.90,-0.59 -0.59,0 -1.18,.19 -1.68,.49 -0.49,.3 -1.01,.80 -1.21,1.40 l 0,-7.90 -3.28,0 z m -49.99,.78 3.90,13.90 .18,6.71 3.31,0 0,-6.71 3.87,-13.90 -3.37,0 -1.40,6.31 c -0.4,1.89 -0.71,3.19 -0.81,3.99 l -0.09,0 c -0.2,-1.1 -0.51,-2.4 -0.81,-3.99 l -1.37,-6.31 -3.40,0 z m 29.59,0 0,2.71 3.40,0 0,17.90 3.28,0 0,-17.90 3.40,0 c 0,0 .00,-2.71 -0.09,-2.71 l -9.99,0 z m -53.49,5.12 8.90,5.18 -8.90,5.09 0,-10.28 z m 89.40,.09 c -1.7,0 -2.89,.59 -3.59,1.59 -0.69,.99 -0.99,2.60 -0.99,4.90 l 0,2.59 c 0,2.2 .30,3.90 .99,4.90 .7,1.1 1.8,1.59 3.5,1.59 1.4,0 2.38,-0.3 3.18,-1 .7,-0.7 1.09,-1.69 1.09,-3.09 l 0,-0.5 -2.90,-0.21 c 0,1 -0.08,1.6 -0.28,2 -0.1,.4 -0.5,.62 -1,.62 -0.3,0 -0.61,-0.11 -0.81,-0.31 -0.2,-0.3 -0.30,-0.59 -0.40,-1.09 -0.1,-0.5 -0.09,-1.21 -0.09,-2.21 l 0,-0.78 5.71,-0.09 0,-2.62 c 0,-1.6 -0.10,-2.78 -0.40,-3.68 -0.2,-0.89 -0.71,-1.59 -1.31,-1.99 -0.7,-0.4 -1.48,-0.59 -2.68,-0.59 z m -50.49,.09 c -1.09,0 -2.01,.18 -2.71,.68 -0.7,.4 -1.2,1.12 -1.49,2.12 -0.3,1 -0.5,2.27 -0.5,3.87 l 0,2.21 c 0,1.5 .10,2.78 .40,3.78 .2,.9 .70,1.62 1.40,2.12 .69,.5 1.71,.68 2.81,.78 1.19,0 2.08,-0.28 2.78,-0.68 .69,-0.4 1.09,-1.09 1.49,-2.09 .39,-1 .49,-2.30 .49,-3.90 l 0,-2.21 c 0,-1.6 -0.2,-2.87 -0.49,-3.87 -0.3,-0.89 -0.8,-1.62 -1.49,-2.12 -0.7,-0.5 -1.58,-0.68 -2.68,-0.68 z m 12.18,.09 0,11.90 c -0.1,.3 -0.29,.48 -0.59,.68 -0.2,.2 -0.51,.31 -0.81,.31 -0.3,0 -0.58,-0.10 -0.68,-0.40 -0.1,-0.3 -0.18,-0.70 -0.18,-1.40 l 0,-10.99 -3.40,0 0,11.21 c 0,1.4 .18,2.39 .68,3.09 .49,.7 1.21,1 2.21,1 1.4,0 2.48,-0.69 3.18,-2.09 l .09,0 .31,1.78 2.59,0 0,-14.99 c 0,0 -3.40,.00 -3.40,-0.09 z m 17.31,0 0,11.90 c -0.1,.3 -0.29,.48 -0.59,.68 -0.2,.2 -0.51,.31 -0.81,.31 -0.3,0 -0.58,-0.10 -0.68,-0.40 -0.1,-0.3 -0.21,-0.70 -0.21,-1.40 l 0,-10.99 -3.40,0 0,11.21 c 0,1.4 .21,2.39 .71,3.09 .5,.7 1.18,1 2.18,1 1.39,0 2.51,-0.69 3.21,-2.09 l .09,0 .28,1.78 2.62,0 0,-14.99 c 0,0 -3.40,.00 -3.40,-0.09 z m 20.90,2.09 c .4,0 .58,.11 .78,.31 .2,.3 .30,.59 .40,1.09 .1,.5 .09,1.21 .09,2.21 l 0,1.09 -2.5,0 0,-1.09 c 0,-1 -0.00,-1.71 .09,-2.21 0,-0.4 .11,-0.8 .31,-1 .2,-0.3 .51,-0.40 .81,-0.40 z m -50.49,.12 c .5,0 .8,.18 1,.68 .19,.5 .28,1.30 .28,2.40 l 0,4.68 c 0,1.1 -0.08,1.90 -0.28,2.40 -0.2,.5 -0.5,.68 -1,.68 -0.5,0 -0.79,-0.18 -0.99,-0.68 -0.2,-0.5 -0.31,-1.30 -0.31,-2.40 l 0,-4.68 c 0,-1.1 .11,-1.90 .31,-2.40 .2,-0.5 .49,-0.68 .99,-0.68 z m 39.68,.09 c .3,0 .61,.10 .81,.40 .2,.3 .27,.67 .37,1.37 .1,.6 .12,1.51 .12,2.71 l .09,1.90 c 0,1.1 .00,1.99 -0.09,2.59 -0.1,.6 -0.19,1.08 -0.49,1.28 -0.2,.3 -0.50,.40 -0.90,.40 -0.3,0 -0.51,-0.08 -0.81,-0.18 -0.2,-0.1 -0.39,-0.29 -0.59,-0.59 l 0,-8.5 c .1,-0.4 .29,-0.7 .59,-1 .3,-0.3 .60,-0.40 .90,-0.40 z' id='ytp-id-30'></path></svg>\n            </a>\n        </div>\n        <a href='https://www.youtube.com/embed/<< videoID >>?feature=oembed&autoplay=1'>\n            <img src='https://img.youtube.com/vi/<< videoID >>/hqdefault.jpg' alt='<< name >>' />\n            <span>\n            <svg height='100%' version='1.1' viewBox='0 0 68 48' width='100%'><path class='ytp-large-play-button-bg' d='M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z' fill='#f00'></path><path d='M 45,24 27,14 27,34' fill='#fff'></path></svg>\n            </span>\n        </a>\"\n    width=\"1024\"\n    height=\"576\"\n    loading=\"lazy\"\n    frameborder=\"0\">\n</iframe>\n",Ibles.JST["photoset-cell"]='<div class="photoset-item photoset-cell" style="-webkit-flex: << aspectRatio >>; flex: << aspectRatio >>;">\n    <div class="photoset-image">\n        <[ if (isGif) {]>\n            <video class="gif-video" controls autoplay muted loop playsinline>\n                <source src="<< mp4Url >>" type="video/mp4">\n            </video>\n        <[ } else { ]>\n            <a class="gallery-link" rel="<< galleryId >>" href="<< overlayImageUrl >>" data-download="<< imageOriginalUrl >>" data-fileid="<< fileId >>">\n                <img loading="lazy" alt="<< title >>" src="<< resizedImageUrl >>" <[ if (isGif) {]>data-gif-url="<< gifUrl >>"<[}]>>\n                <[ if (!_.isEmpty(imageNotes)) { ]>\n                    <i class="notes-icon"></i>\n                <[ } ]>\n            </a>\n        <[ } ]>\n    </div>\n</div>\n',function(e){e.fn.notes=function(t){var n;return(n={}).init=function(t,i,o){return this.each((function(){var i,s;return s=e(this),i=e('<div class="note-holder"></div>'),setTimeout((function(){var a,l,r,c,d,u;if(l=n.extractInfo(s,o),i.addClass(l.imgId),i.attr("id","holder_"+l.imgId),n.placeNoteHolder(i,l),null!=o?o.append(i):e("body").append(i),a=function(e){var t;return e.parentWidth=l.width,e.parentHeight=l.height,e.noteHolder=i,t=[e],n.display.apply(s,t)},t){for(u=[],c=0,d=t.length;c<d;c++)r=t[c],u.push(a(r));return u}}),10)}))},n.extractInfo=function(e,t){var n,i,o,s,a;return a=e.width(),o=e.height(),i=e.attr("class"),s=t?e.offsetParent().position():e.offset(),null!=i&&(n=i.indexOf(" ")),{width:a,height:o,offset:s,imgId:null!=n&&-1!==n?i.split(" ")[1]:i}},n.placeNoteHolder=function(e,t){if(null!=t&&null!=t.offset)return e.css({left:t.offset.left+"px",top:t.offset.top+"px"})},n.display=function(e){var t,i,o,s;return t=Math.round(e.parentWidth*e.left),s=Math.round(e.parentHeight*e.top),o=Math.round(e.parentWidth*e.width),i=Math.round(e.parentHeight*e.height),n.drawBox({left:t,top:s,width:o,height:i,note:e}),this},n.drawBox=function(t){var i,o;return o=t.note.id?t.note.id:t.note.noteID,i=e('<div id="'+o+'" class="note-border"><div class="note-text"><div class="note-text-value">'+t.note.text+"</div></div></div>"),t.note.noteHolder.append(i),i.css({width:t.width+"px",left:t.left+"px",height:t.height+"px",top:t.top+"px"}),n.bind(i,t.height),this},n.setNoteTextTop=function(e,t){return e.css({top:t+"px"})},n.noteHover=function(t,i,o){var s;return s=this,t.hover((function(){return clearTimeout(s.timer),n.setNoteTextTop(o,i),e("div.note-text").hide(),o.show()}),(function(){return clearTimeout(s.timer),s.timer=setTimeout((function(){return o.fadeOut()}),1500)}))},n.bind=function(e,t){var i;i=e.find("div.note-text"),n.noteHover(e,t,i)},n[t]?n[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?e.error("Method "+t+" does not exist on jQuery.notes"):n.init.apply(this,arguments)}}(window.jQuery),function(e,t,n){e.package("Ibles.views");var i={enableCropping:!0,maxRowHeight:700,maxWidth:1200,singleRowAspectRatioMax:3/4,minCellAspect:{ratio:2/3,ratioRnded:.7,cropParam:"2:3"},maxCellAspect:{ratio:1.5,ratioRnded:1.5,cropParam:"3:2"},maxImageWidthsByType:{small:320,medium:620,large:1024}};e.views.PhotosetView=Backbone.View.extend({template:_.template(e.JST.photoset),model:null,events:{"click .gallery-link":"renderGalleryOverlay","click .photoset-showmore":"showHiddenRows"},initialize:function(t){var n=_.clone(i);this.title=t.title,this.galleryId=_.uniqueId("photoset"),this.rows=[],this.rowAspectRatios={},this.settings=_.extend(n,_.pick(t,_.keys(n))),e.pageContext.isMay4&&t.fileCollection.shift(),this.render(t.fileCollection)},placeImageCellsInRows:function(e){var t,n,i=this.setRowAndColIndexForCells,o=e.length,s=[];if(t=(o-1)%3==0?4:3,i(n=e.slice(0,t),0),s.push(n),o>=5)for(var a,l=e.slice(t),r=l.length,c=0,d=1;c<r;c+=3,d++)(a=l.slice(c,c+3)).length&&(i(a,d),s.push(a));return this.rows=s},setRowAndColIndexForCells:function(e,t){e.forEach((function(e,n){0==t?(e.setRowIndex(0),e.setColIndex(0==n?0:1)):(e.setRowIndex(t),e.setColIndex(n))}))},getRowAspectRatios:function(e){var t,n,i=this,o=i.rowAspectRatios[e];return o||(t=i.rows[e],n=0==e&&i.firstRowRequiresMultiDimensionalLayout()?[t[0].aspectRatio,1/_.reduce(t.slice(1),(function(e,t){return e+1/t.aspectRatio}),0)]:_.map(t,(function(e){return e.aspectRatio})),i.rowAspectRatios[e]=n)},firstRowRequiresMultiDimensionalLayout:function(){var e=this.rows[0],t=this.settings.singleRowAspectRatioMax;return e.length>2&&_.some(_.map(e,(function(e){return e.aspectRatio})),(function(e){return e>t}))},getEffectiveMaxWidth:function(){var e,t,n,i,o,s=this,a=s.effectiveMaxWidth;return a||(t=(e=s.settings).maxWidth,n=e.maxRowHeight,i=s.getRowAspectRatios(0),o=_.reduce(i,(function(e,t){return e+t}),0),s.effectiveMaxWidth=Math.min(n*o,t))},renderGalleryOverlay:function(t){var n=this;t.preventDefault(),new e.views.FancyboxView({targets:this.$(".gallery-link"),afterShow:n.renderImageNotes,canRotate:function(){return n.model.isEditableByCurrentUser()||e.session.isAdmin()}})},renderImageNotes:function(){var e=$.fancybox.inner,t=$($.fancybox.current.element);if(e.length){var n=t.closest(".photoset-cell").data("imagenotes"),i=e.find("img:first");n&&i.notes(n,!1,e)}},showHiddenRows:function(e){e.preventDefault();var t=this.$(".photoset-showmore");this.$(".hidden-row").removeClass("hidden-row"),t.remove()},render:function(e){var t=this,n=e.groupBy((function(e){return"VIDEO"==e.getEmbedType()?"videoFiles":"imageFiles"})),i=n.imageFiles||[],o=n.videoFiles||[],s=i.length,a=o.length,l=$(t.template({numImages:s,numVideos:a}));a&&t.renderVideoFiles(o,l),s&&t.renderImageFiles(i,l),t.$el.append(l)},renderVideoFiles:function(t,n){var i=n.find(".videoset");t.forEach((function(t){var n=new e.views.VideosetCell({file:t});i.append(n.load())}))},renderImageFiles:function(t,i){var o=this,s=i.find(".photoset"),a=t.map((function(t){return new e.views.PhotosetCell({file:t},o)})),l=o.placeImageCellsInRows(a),r=l.length,c=o.settings.maxWidth,d=o.getEffectiveMaxWidth(),u=function(e){var t=n.createElement("div");return t.innerHTML=e,t.firstChild};l.forEach((function(n,i){var a,l,c,d,h,f,p,g=i>0,m=0,b=n.length,v=function(e,t){return u(`<div class="photoset-row items-${t} ${e>0?" hidden-row":""}"></div>`)}(i,b),w=v;0==i&&o.firstRowRequiresMultiDimensionalLayout()&&(c=o.getRowAspectRatios(0),d=c[1],a=u(`<div class="photoset-col" style="-webkit-flex:${d};flex:${d};"></div>`),v.appendChild(n[0].load(g)),v.appendChild(a),w=a,m=1),n.slice(m).forEach((function(e){l=e.load(g),w.appendChild(l)})),0==i&&r>1&&(h=l,f=t.length-b,p=u(`<div class="photoset-showmore"><img class="loading" src="${e.staticUrl("img/ajax_loader_48px.gif")}">${f} More Images</div>`),h.querySelector(".photoset-image").appendChild(p)),s.append(v)})),d<c&&(s.get(0).style.maxWidth=d+"px")}}),e.views.VideosetCell=Backbone.View.extend({template:_.template(e.JST["videoset-cell"]),initialize:function(e){this.file=e.file},load:function(){var t=this.file,i=n.createElement("div"),o=t.getYouTubeVideoID();return i.innerHTML=this.template({embedHtmlCode:t.isYouTubeEmbed()&&o?_.template(e.JST["videoset-youtube-cell"])({name:t.get("name"),videoID:o}):e.makeSafeForSSL(t.getEmbedHtmlCode())}),i.firstChild}}),e.views.PhotosetCell=Backbone.View.extend({template:_.template(e.JST["photoset-cell"]),initialize:function(e,t){var n=this;n.file=e.file,n.photoset=t,n.rowIndex=0,n.colIndex=0,n.setAspectRatio()},setRowIndex:function(e){this.rowIndex=e},setColIndex:function(e){this.colIndex=e},setAspectRatio:function(){var e,t=this,n=t.file,i=n.getWidth()/n.getHeight(),o=Math.round(10*i)/10,s=t.photoset.settings,a=s.minCellAspect,l=s.maxCellAspect,r=a.ratio,c=a.ratioRnded,d=l.ratio,u=l.ratioRnded;o<c?(i=r,e=a.cropParam):o>u&&(i=d,e=l.cropParam),t.aspectRatio=i,t.cropParam=e},load:function(e){var t,i,o,s=this,a=s.file,l=s.photoset,r=s.template({fileId:a.get("id"),title:l.title,galleryId:l.galleryId,resizedImageUrl:s.getCellImageUrl(),isGif:a.isGif(),gifUrl:a.getLargeAnimationUrl(),mp4Url:a.getMp4Url(),overlayImageUrl:a.getLargeUrl(),imageOriginalUrl:a.getOriginalUrl(),imageNotes:a.getImageNotes(),aspectRatio:s.aspectRatio,lazy:e});return(t=n.createElement("div")).innerHTML=r,(o=(i=t.firstChild).dataset)&&(o.imagenotes=JSON.stringify(s.file.getImageNotes()||[])),i},getCellImageUrl:function(){var e=this,t=e.file,n=e.photoset,i=e.rowIndex,o=e.colIndex,s=n.settings,a=n.rows[i].length>1,l=s.enableCropping&&(a||!a&&e.aspectRatio<e.maxCropAspectRatio),r=n.getEffectiveMaxWidth(),c=s.maxImageWidthsByType,d=n.getRowAspectRatios(i),u=_.reduce(d,(function(e,t){return e+t}),0),h=Math.round(d[o]/u*r),f=e.cropParam,p={frame:!0,width:1024,height:1024,fit:"bounds"};return h<t.getWidth()&&h<c.large&&(p.width=h),l&&f&&(p.crop=f),t.getOptimizedImageUrl(p)}})}(Ibles,window,document),Ibles.JST["hamburger-menu-auth-section"]='<div id="auth-section" class="clearfix">\n    <li class="auth-section-links">\n        <a class="main-menu profile-link" data-bypass="true" href="<< memberUrl >>">\n            <img class="avatar" src="<< avatarUrl >>"/> Profile\n        </a>\n        <a class="main-menu logout-link btn-logout">\n            Logout\n        </a>\n    </li>\n</div>\n',function(e,t,n){function i(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function s(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):y?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function a(e){return e.replace(/([a-z])-([a-z])/g,(function(e,t,n){return t+n.toUpperCase()})).replace(/^-/,"")}function l(e,t){return function(){return e.apply(t,arguments)}}function r(e){return e.replace(/([A-Z])/g,(function(e,t){return"-"+t.toLowerCase()})).replace(/^ms-/,"-ms-")}function c(t,n,i){var o;if("getComputedStyle"in e){o=getComputedStyle.call(e,t,n);var s=e.console;if(null!==o)i&&(o=o.getPropertyValue(i));else if(s){s[s.error?"error":"log"].call(s,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}}else o=!n&&t.currentStyle&&t.currentStyle[i];return o}function d(e,n,i,o){var a,l,r,c,d="modernizr",u=s("div"),h=function(){var e=t.body;return e||((e=s(y?"svg":"body")).fake=!0),e}();if(parseInt(i,10))for(;i--;)(r=s("div")).id=o?o[i]:d+(i+1),u.appendChild(r);return(a=s("style")).type="text/css",a.id="s"+d,(h.fake?h:u).appendChild(a),h.appendChild(u),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(t.createTextNode(e)),u.id=d,h.fake&&(h.style.background="",h.style.overflow="hidden",c=w.style.overflow,w.style.overflow="hidden",w.appendChild(h)),l=n(u,e),h.fake?(h.parentNode.removeChild(h),w.style.overflow=c,w.offsetHeight):u.parentNode.removeChild(u),!!l}function u(t,i){var o=t.length;if("CSS"in e&&"supports"in e.CSS){for(;o--;)if(e.CSS.supports(r(t[o]),i))return!0;return!1}if("CSSSupportsRule"in e){for(var s=[];o--;)s.push("("+r(t[o])+":"+i+")");return d("@supports ("+(s=s.join(" or "))+") { #modernizr { position: absolute; } }",(function(e){return"absolute"==c(e,null,"position")}))}return n}function h(e,t,l,r){function c(){h&&(delete k.style,delete k.modElem)}if(r=!i(r,"undefined")&&r,!i(l,"undefined")){var d=u(e,l);if(!i(d,"undefined"))return d}for(var h,f,p,g,m,b=["modernizr","tspan","samp"];!k.style&&b.length;)h=!0,k.modElem=s(b.shift()),k.style=k.modElem.style;for(p=e.length,f=0;p>f;f++)if(g=e[f],m=k.style[g],o(g,"-")&&(g=a(g)),k.style[g]!==n){if(r||i(l,"undefined"))return c(),"pfx"!=t||g;try{k.style[g]=l}catch(e){}if(k.style[g]!=m)return c(),"pfx"!=t||g}return c(),!1}function f(e,t,n,o,s){var a=e.charAt(0).toUpperCase()+e.slice(1),r=(e+" "+x.join(a+" ")+a).split(" ");return i(t,"string")||i(t,"undefined")?h(r,t,o,s):function(e,t,n){var o;for(var s in e)if(e[s]in t)return!1===n?e[s]:i(o=t[e[s]],"function")?l(o,n||t):o;return!1}(r=(e+" "+C.join(a+" ")+a).split(" "),t,n)}function p(e,t,i){return f(e,n,n,t,i)}var g=[],m=[],b={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout((function(){t(n[e])}),0)},addTest:function(e,t,n){m.push({name:e,fn:t,options:n})},addAsyncTest:function(e){m.push({name:null,fn:e})}},v=function(){};v.prototype=b,v=new v;var w=t.documentElement,y="svg"===w.nodeName.toLowerCase(),I="Moz O ms Webkit",x=b._config.usePrefixes?I.split(" "):[];b._cssomPrefixes=x;var C=b._config.usePrefixes?I.toLowerCase().split(" "):[];b._domPrefixes=C;var S={elem:s("modernizr")};v._q.push((function(){delete S.elem}));var k={style:S.elem.style};v._q.unshift((function(){delete k.style})),b.testAllProps=f,b.testAllProps=p,v.addTest("cssanimations",p("animationName","a",!0)),v.addTest("csstransitions",p("transition","all",!0));var M=function(t){var i,o=prefixes.length,s=e.CSSRule;if(void 0===s)return n;if(!t)return!1;if((i=(t=t.replace(/^@/,"")).replace(/-/g,"_").toUpperCase()+"_RULE")in s)return"@"+t;for(var a=0;o>a;a++){var l=prefixes[a];if(l.toUpperCase()+"_"+i in s)return"@-"+l.toLowerCase()+"-"+t}return!1};b.atRule=M,b.prefixed=function(e,t,n){return 0===e.indexOf("@")?M(e):(-1!=e.indexOf("-")&&(e=a(e)),t?f(e,t,n):f(e,"pfx"))},function(){var e,t,n,o,s,a;for(var l in m)if(m.hasOwnProperty(l)){if(e=[],(t=m[l]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(o=i(t.fn,"function")?t.fn():t.fn,s=0;s<e.length;s++)1===(a=e[s].split(".")).length?v[a[0]]=o:(!v[a[0]]||v[a[0]]instanceof Boolean||(v[a[0]]=new Boolean(v[a[0]])),v[a[0]][a[1]]=o),g.push((o?"":"no-")+a.join("-"))}}(),function(e){var t=w.className,n=v._config.classPrefix||"";if(y&&(t=t.baseVal),v._config.enableJSClass){var i=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(i,"$1"+n+"js$2")}v._config.enableClasses&&(t+=" "+n+e.join(" "+n),y?w.className.baseVal=t:w.className=t)}(g),delete b.addTest,delete b.addAsyncTest;for(var $=0;$<v._q.length;$++)v._q[$]();e.Modernizr=v}(window,document),function(e,t,n){"use strict";var i=t.Modernizr,o=e("body");e.DLMenu=function(t,n){this.$el=e(n),this._init(t)},e.DLMenu.defaults={animationClasses:{classin:"dl-animate-in-1",classout:"dl-animate-out-1"},onLevelClick:function(e,t){return!1},onLinkClick:function(e,t){return!1}},e.DLMenu.prototype={_init:function(t){if(this.options=e.extend(!0,{},e.DLMenu.defaults,t),this._config(),i){this.animEndEventName={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"}[i.prefixed("animation")]+".dlmenu",this.transEndEventName={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"}[i.prefixed("transition")]+".dlmenu",this.supportAnimations=i.cssanimations,this.supportTransitions=i.csstransitions}this._initEvents()},_config:function(){this.open=!1,this.$trigger=this.$el.children(".dl-trigger"),this.$menu=this.$el.children("ul.dl-menu"),this.$menuitems=this.$menu.find("li:not(.dl-back)"),this.$el.find("ul.dl-submenu").prepend('<li class="dl-back"><a href="#">back</a></li>'),this.$back=this.$menu.find("li.dl-back")},_initEvents:function(){var t=this;this.$trigger.on("click.dlmenu",(function(){return t.open?t._closeMenu():t._openMenu(),!1})),this.$menuitems.on("click.dlmenu",(function(n){var i=e(this),o=i.children("ul.dl-submenu");if(i.hasClass("passthrough")||n.stopPropagation(),o.length>0){var s=o.clone().css("opacity",0).insertAfter(t.$menu),a=function(){t.$menu.off(t.animEndEventName).removeClass(t.options.animationClasses.classout).addClass("dl-subview"),i.addClass("dl-subviewopen").parents(".dl-subviewopen:first").removeClass("dl-subviewopen").addClass("dl-subview"),s.remove()};return setTimeout((function(){s.addClass(t.options.animationClasses.classin),t.$menu.addClass(t.options.animationClasses.classout),t.supportAnimations?t.$menu.on(t.animEndEventName,a):a.call(),t.options.onLevelClick(i,i.children("a:first").text())})),!1}t.options.onLinkClick(i,n)})),this.$back.on("click.dlmenu",(function(n){var i=e(this),o=i.parents("ul.dl-submenu:first"),s=o.parent(),a=o.clone().insertAfter(t.$menu),l=function(){t.$menu.off(t.animEndEventName).removeClass(t.options.animationClasses.classin),a.remove()};return setTimeout((function(){a.addClass(t.options.animationClasses.classout),t.$menu.addClass(t.options.animationClasses.classin),t.supportAnimations?t.$menu.on(t.animEndEventName,l):l.call(),s.removeClass("dl-subviewopen");var e=i.parents(".dl-subview:first");e.is("li")&&e.addClass("dl-subviewopen"),e.removeClass("dl-subview")})),!1}))},closeMenu:function(){this.open&&this._closeMenu()},_closeMenu:function(){var t=this,n=function(){t.$menu.off(t.transEndEventName),t._resetMenu()};this.$menu.removeClass("dl-menuopen"),this.$menu.addClass("dl-menu-toggle"),this.$trigger.removeClass("dl-active"),e(".overlay").removeClass("visible"),e("body").removeClass("stop-scrolling"),e("html").removeClass("stop-scrolling"),this.supportTransitions?this.$menu.on(this.transEndEventName,n):n.call(),this.open=!1},openMenu:function(){this.open||this._openMenu()},_openMenu:function(){var t=this;this.$menu.trigger("dlmenu.startOpen"),o.off("click").on("click.dlmenu",(function(){t._closeMenu()})),this.$menu.addClass("dl-menuopen dl-menu-toggle").on(this.transEndEventName,(function(){e(this).removeClass("dl-menu-toggle")})),this.$trigger.addClass("dl-active"),e("html").addClass("stop-scrolling"),e("body").addClass("stop-scrolling"),e(".overlay").addClass("visible"),this.open=!0},_resetMenu:function(){this.$menu.removeClass("dl-subview"),this.$menuitems.removeClass("dl-subview dl-subviewopen")}};var s=function(e){t.console&&t.console.error(e)};e.fn.dlmenu=function(t){if("string"==typeof t){var n=Array.prototype.slice.call(arguments,1);this.each((function(){var i=e.data(this,"dlmenu");i?e.isFunction(i[t])&&"_"!==t.charAt(0)?i[t].apply(i,n):s("no such method '"+t+"' for dlmenu instance"):s("cannot call methods on dlmenu prior to initialization; attempted to call method '"+t+"'")}))}else this.each((function(){var n=e.data(this,"dlmenu");n?n._init():n=e.data(this,"dlmenu",new e.DLMenu(t,this))}));return this}}(jQuery,window),function(e,t){t.package("Ibles.views"),t.views.HamburgerMenu=Backbone.View.extend({initialize:function(e){var t=this;e&&e.async?this.getMenuContents().done((function(){t.bindMenuPlugin(),t.enableResize(),t.updateAuthUI()})):(t.bindMenuPlugin(),t.enableResize(),t.updateAuthUI())},bindMenuPlugin:function(){this.$el.dlmenu({})},enableResize:function(){var t=this;t.setSizes(),$(e).resize(_.debounce((function(){t.setSizes()}),250))},getMenuContents:function(){var e=this;return $.ajax("/parts/hamburger_menu/").then((function(t){e.$(".dl-menu").html(t),e.updateAuthUI()}))},setSizes:function(){if(t.isMobile()){var n=$(e).height(),i=$("#main-header");$(".overlay").height(n+70),$(".channels-menu").height(n-i.outerHeight()),$(".dl-menu").height(n-i.outerHeight())}},updateAuthUI:function(){var e=$(".logged-in-item"),n=$(".logged-out-item");if(t.session.authenticated()){var i=t.session,o=_.extend(t.session.toJSON(),{memberUrl:i.getMemberUrl(),avatarUrl:i.getAvatarUrl()}),s=_.template(t.JST["hamburger-menu-auth-section"]);$("#auth-container").html(s(o)),n.removeClass("visible"),e.addClass("visible"),$("#auth-container .btn-logout").on("click",(function(){t.logout()}))}else e.removeClass("visible"),n.addClass("visible")}})}(window,Ibles),Ibles.JST["sticky-header-desktop"]='<div class="sticky-header" data-location="stickyNav">\n\t<div id="hamburger-menu" class="dl-menuwrapper hamburger-menu">\n\t\t<button class="dl-trigger"><i class="svg-icon svg-hamburger"></i><span class="sr-only">Open Menu</span></button>\n\t\t<ul class="dl-menu"></ul>\n\t</div>\n    <span class="byline">\n        <span class="title"><< title >></span> by <a class="author" rel="author" href="<< authorUrl >>"><< screenName >></a><button class="btn btn-yellow follow-btn">Follow</button>\n    </span>\n    <span class="ible-actions">\n        <[ if (!Ibles.pageContext.isMay4) {]>\n            <[ if (type == "Step by Step") {]>\n            <button class="pdf-btn" data-sourcea="download"><i class="svg-icon svg-pdf"></i>Save PDF</button>\n            <[ } ]>\n        <[ } ]>\n        <button class="favorite-btn"><i class="svg-icon svg-favorite"></i><span class="favorite-txt">Favorite</span></button>\n        <[ if (type == "Step by Step") {]>\n            <[ if (!Ibles.pageContext.isMay4) {]>\n                <button class="imadeit-btn"><a href="#ible-imadeits"><i class="icon icon-imadeit"></i><span class="imadeit-txt">I Made It</span></a></button>\n            <[ } ]>\n            <button class="view-comments-btn"><a href="#discuss"><i class="svg-icon svg-comments"></i><span class="sr-only">View Comments</span></a></button>\n        <[ } ]>\n        <button class="share-menu-btn"><i class="svg-icon svg-share"></i><span class="sr-only">Share</span></button>\n        <button class="more-menu-btn"><i class="svg-icon svg-ellipsis"></i><span class="sr-only">More Options</span></button>\n    </span>\n    <div class="dropdown share-menu">\n        <button class="btn btn-facebook fb-btn"><i class="svg-icon svg-facebook"></i> Facebook</button>\n        <button class="btn btn-twitter twit-btn"><i class="svg-icon svg-twitter"></i> Twitter</button>\n        <button class="btn btn-danger pin-btn"><i class="svg-icon svg-pinterest"></i> Pinterest</button>\n        <button class="btn google-classroom-btn"><i class="icon-google-classroom"></i> Google Classroom</button>\n    </div>\n    <div class="dropdown more-menu">\n        <button class="btn flag-menu-btn">Flag</button>\n        <ul class="flag-menu unstyled hide">\n            <li><a class="flag-btn" data-as="wrong-category">Wrong Category</a></li>\n            <li><a class="flag-btn" data-as="inappropriate">Inappropriate</a></li>\n            <li><a class="flag-btn" data-as="incomplete">Incomplete</a></li>\n            <li><a class="flag-btn" data-as="spam">Spam</a></li>\n        </ul>\n        <button class="btn add-to-collection-btn">Add To Collection</button>\n        <button class="btn add-to-contest-btn admin-action">Add To Contest</button>\n        <button class="btn edit-btn author-action">Edit</button>\n    </div>\n</div>\n',Ibles.views.StickyHeaderBase=Backbone.View.extend({template:null,initialize:function(){this.render(),this.setupScrollFix()},hide:function(){},render:function(){var e=this,t=e.model,n=t.author;e.$el.append(e.template({title:t.get("title"),screenName:n.get("screenName"),authorUrl:n.getUrl(),authorAvatar:n.getAvatarFile().getTinyUrl(),type:t.get("type")}))},setupScrollFix:function(){var e=this,t=e.$(".sticky-header"),n=e.$(".article-header"),i=n.offset().top+n.height();$(window).scroll(_.throttle((function(){$(window).scrollTop()>=i?(t.addClass("affix"),Ibles.Events.trigger("fixHeaderShown",{headerHeight:50})):(t.removeClass("affix"),e.$(".more-menu").hide(),Ibles.Events.trigger("fixHeaderHidden"))}),250))}}),Ibles.package("Ibles.views"),Ibles.views.StickyHeader=Ibles.views.StickyHeaderBase.fullExtend({template:_.template(Ibles.JST["sticky-header-desktop"]),events:{"click .flag-menu-btn":"toggleFlagMenu","click .flag-btn":"attemptFlag","click .edit-btn":"editBtnClicked","click .share-menu-btn":"toggleShareMenu","click .more-menu-btn":"toggleMoreMenu","click .add-to-collection-btn":"showAddToCollectionModal","click .add-to-contest-btn":"showAddToContestModal"},initialize:function(){this._super(),this.menu=new Ibles.views.HamburgerMenu({el:"#hamburger-menu",async:!0})},hide:function(){var e=this;setTimeout((function(){e.$(".sticky-header").removeClass("affix")}),250)},editBtnClicked:function(){window.location=this.model.getEditUrl()},toggleShareMenu:function(e){this.toggleDropdownMenu(e,$(".share-menu-btn"),$(".share-menu"))},toggleMoreMenu:function(e){this.toggleDropdownMenu(e,$(".more-menu-btn"),$(".more-menu"))},toggleDropdownMenu:function(e,t,n){n.is(":visible")?(n.hide(),$(document).off("click.outside-menu")):(n.show(),setTimeout((function(){$(document).on("click.outside-menu",(function(e){var i=$(e.target),o=i.is(t),s=!!i.closest(".dropdown").length;o||s||($(document).off("click.outside-menu"),n.hide())}))})))},toggleFlagMenu:function(){Ibles.requireLogin((function(){this.$(".flag-menu").toggle()}),{sourcea:"flag"})},attemptFlag:function(e){e.preventDefault();var t=this.model,n=$(e.target),i=n.text(),o=n.attr("data-as");new Ibles.views.ConfirmationView({model:new Ibles.models.ConfirmationModel({confirmationMessage:Ibles.text.messages.confirmFlag.replace("<< reason >>",i)}),callbackFn:function(){t.set("flaggedAs",o),t.flagAction().success(Ibles.views.AlertView.callbackFactory("success")).error(Ibles.views.AlertView.callbackFactory("error"))}})},showAddToCollectionModal:function(){var e=this;this.$(".more-menu").hide(),Ibles.requireLogin((function(){Ibles.loadJsBundle("create_collection_js",$.proxy(e.renderAddToCollectionModal,e))}),{sourcea:"showAddToCollectionModal"})},renderAddToCollectionModal:function(){if(!this.addToCollectionView){var e=$(".add-to-collection-btn");e.addClass("loading");var t=Ibles.pageContext.ibleData;this.addToCollectionView=new Ibles.views.AddToCollectionView({ibleId:t.id,ibleTitle:t.title,coverImage:t.coverImage}),this.listenToOnce(this.addToCollectionView,"ready",(function(){e.removeClass("loading")}))}this.addToCollectionView.render()},showAddToContestModal:function(){Ibles.triggerReactEvent("showSelectContestModal")}}),function(){var e=Ibles.pageContext.ibleData;e&&window.LogHit&&window.LogHit(e.id,e.author.id)}(),Ibles.package("Ibles.views"),Ibles.views.ScrollableCardsView=Backbone.View.fullExtend({events:{"click .left-control":"scrollBack","click .right-control":"scrollForward"},initialize:function(){_.bindAll(this,"scroll"),this.$scrollable=this.$(".scrollable-cards-inner"),this.$scrollable.scroll(_.debounce(this.scroll,250))},scrollBack:function(e){if(e.preventDefault(),$(e.currentTarget).hasClass("active")){var t=this.$(".carousel-items").scrollLeft();this.$scrollable.animate({scrollLeft:t-this.$scrollable.width()},800)}},scrollForward:function(e){if(e.preventDefault(),$(e.currentTarget).hasClass("active")){var t=this.$scrollable.scrollLeft();this.$scrollable.animate({scrollLeft:t+this.$scrollable.width()},800)}},scroll:function(){var e=this.$scrollable,t=this.$(".right-control"),n=this.$(".left-control"),i=e.children(".scrollable-card").last(),o=e.width();e.scrollLeft()>0?n.addClass("active"):n.removeClass("active"),i.position().left+i.width()<=o?t.removeClass("active"):t.addClass("active")}}),Ibles.package("Ibles.views"),Ibles.views.BaseInstructableView=Backbone.View.extend({events:{"click .favorite-btn":"attemptFave","click .follow-btn":"attemptFollow","click .download-pdf, .pdf-btn":"downloadPDF","click .facebook-share-button, .fb-btn":"shareOnFacebook","click .pinterest-share-button, .pin-btn":"shareOnPinterest","click .twittr-share-button, .twit-btn":"shareOnTwitter","click .google-classroom-btn":"shareOnGoogleClassroom"},initialize:function(e){this.opts=_.clone(e||{}),this.renderPostedDate(),this.setUpCategoryTracking(),this.updateFollowingState(),this.updateFavoriteState(),this.listenTo(this.model,"change:favorite",this.updateFavoriteState),this.listenTo(this.model.author,"change:following",this.updateFollowingState),this.listenTo(this.model,"change:favorites change:views",this.updateStats),this.setUpMay4()},renderPostedDate:function(){if(Ibles.session.authenticated()){var e=dayjs(this.model.get("publishDate")),t="Unpublished";this.model.get("isPreview")||(t="Published "+e.format("MMM Do, YYYY")),Ibles.pageContext.isMay4&&(t="Submitted "+e.format("MMM Do, YYYY")),this.$(".posted-date").text(" "+t).show()}},downloadPDF:function(){window.print()},attemptFave:function(e){var t=this;e.preventDefault(),Ibles.requireLogin((function(){Ibles.alertWhenError(t.model.favoriteAction())}),{sourcea:"favorite"})},attemptFollow:function(e){var t=this;e.preventDefault(),Ibles.requireLogin((function(){Ibles.alertWhenError(t.model.author.toggleFollowing())}),{sourcea:"follow"})},updateFavoriteState:function(){var e=$(".favorite-btn"),t=$(".favorite-txt");this.model.get("favorite")?(e.addClass("active"),t.text("Favorited")):(e.removeClass("active"),t.text("Favorite"))},updateFollowingState:function(){var e=this.model.author.get("following");$(".follow-btn").html(e?"Following":"Follow")},updateStats:function(){var e=this.model,t=e.get("favorites"),n=e.get("views");t>0&&this.$(".favorite-count").html(t.toLocaleString()),n>0&&this.$(".view-count").html(n.toLocaleString())},shareOnFacebook:function(e){e.preventDefault(),Ibles.fbShare(this.model.get("fullUrl"))},shareOnPinterest:function(e){e.preventDefault(),window.open(`https://www.pinterest.com/pin/create/button/?url=${encodeURIComponent(this.model.get("fullUrl"))}&description=${encodeURIComponent(this.model.get("title"))}&media=${this.model.get("shareImageUrl")}`,"_blank")},shareOnTwitter:function(e){e.preventDefault(),window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(this.model.get("title"))}&url=${encodeURIComponent(this.model.get("fullUrl"))}`,"_blank")},shareOnGoogleClassroom:function(e){e.preventDefault();var t=encodeURIComponent(this.model.get("fullUrl"));window.open(`https://classroom.google.com/share?url=${t}`,"_blank")},setupSyntaxHighlighting:function(){var e=[];$("pre").each((function(t,n){if($(n).attr("data-src")&&""!=$(n).attr("data-src")){var i=$.ajax({url:$(n).attr("data-src"),type:"GET",success:function(e){$(n).append($("<code></code>").text(e))}});e.push(i)}})),e.length>0&&($("head").append('<link rel="stylesheet" href="'+Ibles.staticUrl("css/prism.css")+'" type="text/css" />'),$.when.apply($,e).always((function(){sessionReady([Ibles.staticUrl("js/libs/prism.js")],(function(){Prism.highlightAll(!0)}))})))},setUpCategoryTracking:function(){var e={},t={},n=this.model.get("category"),i=this.model.get("channel");if(_.isUndefined(Ibles.getCookie("categoryTimer"))){var o=dayjs().add(30,"m"),s=Ibles.reverseUrls.ibleUrl(this.model.get("urlString"));Ibles.setCookie("categoryTimer",this.model.get("id"),{path:s,expires:o.toDate()});try{_.isUndefined(localStorage.ibleCategories)||(e=JSON.parse(localStorage.ibleCategories)),_.isUndefined(e[n])?e[n]=1:e[n]=e[n]+1,localStorage.ibleCategories=JSON.stringify(e),_.isUndefined(i)||(_.isUndefined(localStorage.ibleChannels)||(t=JSON.parse(localStorage.ibleChannels)),_.isUndefined(t[i])?t[i]=1:t[i]=t[i]+1,localStorage.ibleChannels=JSON.stringify(t))}catch(e){try{localStorage.clear()}catch(e){}}}},setUpMay4:function(){if(Ibles.pageContext.isMay4){var e=Ibles.session,t=e.authenticated(),n=t&&e.isAdmin(),i=t&&e.get("screenName")===this.model.author.get("screenName");(n||i)&&this.$(".delete-btn").removeClass("hide")}}}),Ibles.package("Ibles.views"),Ibles.views.InstructableView=Ibles.views.BaseInstructableView.fullExtend({events:{"click .license-btn":"showLicense","click .promo-link":"adClick","click .promo-hide":"adHide"},initialize:function(e){this._super(e),this.setupStickyHeader(),this.listenTo(this.model,"userDataSynced",this.afterUserDataSynced)},afterUserDataSynced:function(){},setupStickyHeader:function(){this.stickyHeader=new Ibles.views.StickyHeader({el:this.$el,model:this.model})},showLicense:function(){var e=this.$(".license-btn").data("url");window.open(e,"LICENSE","status=yes,scrollbars=yes,resizable=yes,width=800,height=400")},getTitleForPhotoset:function(e){var t=$(e).prev(".step-title").text();return t.substring(t.indexOf(":")+1).trim()},getStepId:function(e){return $(e.target).closest(".step").data("stepid")},getStepProps:function(e){var t,n=$('.step[data-stepid="'+e+'"]'),i={};return n.length&&(t=n.find(".step-title").text(),_.extend(i,{stepId:e,stepAnchorId:n.attr("id"),stepIndexLabel:t.substring(0,t.indexOf(":")).trim()})),i},scrollToComments:function(){window.location.hash="#discuss"},adClick:function(){Ibles.gaUserEvent("Click",{eventLabel:"AutodeskAds",eventValue:this.model.get("urlString")})},adHide:function(){var e=Ibles.session;if(this.$(".promo-side").hide(),this.$(".promo-top").hide(),e.authenticated()){var t="hideAds=true; expires="+dayjs().utc().add(2,"week").format("ddd, D MMM YYYY HH:mm:ss")+"UTC; path=/; Secure; SameSite=Strict";document.cookie=t}}}),Ibles.package("Ibles.views"),Ibles.views.DesktopInstructableView=Ibles.views.InstructableView.fullExtend({events:{"click .view-in-3d-btn":"viewIn3d","click .step-link":"stepLinkClicked"},initialize:function(e){this._super(e),this.setupPhotosets(),this.setupSyntaxHighlighting(),this.showAuthorActions(),this.updateFeaturedBy(),this.updatePublishDate()},setupPhotosets:function(){var e=this;this.model.getPhotosetFiles().done((function(t){var n=e.$(".mediaset");_.each(n,(function(n,i){new Ibles.views.PhotosetView({el:n,model:e.model,fileCollection:t[i],title:e.getTitleForPhotoset(n)})}));var i=Ibles.pageContext.ibleData.suppliesFiles;if(i&&i.length){var o=e.$(".mediaset-supplies");new Ibles.views.PhotosetView({el:o,model:e.model,fileCollection:new Ibles.collections.FileCollection(i.filter((e=>e.image))),title:"Supplies"})}}))},isViewedByAuthor:function(){var e=Ibles.session;return e.authenticated()&&e.get("screenName")===this.model.author.get("screenName")},showAuthorActions:function(){var e=Ibles.session,t=e.authenticated()&&e.isAdmin(),n=this.isViewedByAuthor(),i=!_.isEmpty(this.model.get("collaborators"))&&!_.isEmpty(_.findWhere(this.model.get("collaborators"),{screenName:e.get("screenName")}));(t||n||i)&&this.$(".author-action").removeClass("author-action"),t&&this.$(".admin-action").removeClass("admin-action")},updatePublishDate:function(){if(Ibles.session.authenticated()){var e=dayjs(this.model.get("publishDate")).format("MMMM DD YYYY");this.$(".publish-date").html(e)}},updateFeaturedBy:function(){(Ibles.session.isAdmin()||Ibles.session.isStaff())&&(!0!==this.model.get("featureFlag")||_.isUndefined(this.model.get("featuredBy"))||this.$(".featured-by").html(_.template(Ibles.JST["featured-by"])(this.model.toJSON())))},viewIn3d:function(e){e.preventDefault();var t=$($(e.target).attr("data-embed-html"));t.removeAttr("width"),t.removeAttr("height");var n=$("<div></div>");n.append(t),head.load(Ibles.staticUrl("css/embedModal.css")),Ibles.loadJsBundle("ible_modal_embed_viewer_js",(function(){var t=new Ibles.views.EmbedModalView({model:new Ibles.models.EmbedModel({embedCode:n.html(),fileName:$(e.target).attr("data-embed-filename")})});$("body").append(t.render())}))},stepLinkClicked:function(){this.stickyHeader.hide()}});